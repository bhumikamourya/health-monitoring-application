{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState, useEffect } from \"react\";\nimport api from \"../utils/api\";\nconst toYMD = d => {\n  const yyyy = d.getFullYear();\n  const mm = String(d.getMonth() + 1).padStart(2, \"0\");\n  const dd = String(d.getDate()).padStart(2, \"0\");\n  return `${yyyy}-${mm}-${dd}`;\n};\nexport const useCholesterolChartData = (days = 7) => {\n  _s();\n  const [data, setData] = useState([]);\n  const [todayTotal, setTodayTotal] = useState(0);\n  const [avg, setAvg] = useState(0);\n  useEffect(() => {\n    const fetchSummary = async () => {\n      try {\n        const res = await api.get(`/metrics/cholesterol/summary?days=${days}`);\n        const mapTotal = new Map(res.data.map(d => [toYMD(new Date(d.date)), Number(d.total) || 0]));\n        const mapLDL = new Map(res.data.map(d => [toYMD(new Date(d.date)), Number(d.ldl) || 0]));\n        const mapHDL = new Map(res.data.map(d => [toYMD(new Date(d.date)), Number(d.hdl) || 0]));\n        const end = new Date();\n        end.setHours(0, 0, 0, 0);\n        const start = new Date(end);\n        start.setDate(end.getDate() - (days - 1));\n        const filled = [];\n        const totalArr = [];\n        for (let d = new Date(start); d <= end; d.setDate(d.getDate() + 1)) {\n          const key = toYMD(d);\n          const t = mapTotal.get(key) || 0;\n          const ldl = mapLDL.get(key) || 0;\n          const hdl = mapHDL.get(key) || 0;\n          filled.push({\n            date: key,\n            total: t,\n            ldl,\n            hdl\n          });\n          totalArr.push(t);\n        }\n        setData(filled);\n        setTodayTotal(mapTotal.get(toYMD(end)) || 0);\n        const sum = totalArr.reduce((a, b) => a + b, 0);\n        setAvg(Math.round(sum / totalArr.length));\n      } catch (err) {\n        console.error(\"Cholesterol fetch failed\", err);\n      }\n    };\n    fetchSummary();\n  }, [days]);\n  return {\n    data,\n    todayTotal,\n    avg\n  };\n};\n_s(useCholesterolChartData, \"/Iyoxp+zU+WviC77+p6rukXWERo=\");","map":{"version":3,"names":["useState","useEffect","api","toYMD","d","yyyy","getFullYear","mm","String","getMonth","padStart","dd","getDate","useCholesterolChartData","days","_s","data","setData","todayTotal","setTodayTotal","avg","setAvg","fetchSummary","res","get","mapTotal","Map","map","Date","date","Number","total","mapLDL","ldl","mapHDL","hdl","end","setHours","start","setDate","filled","totalArr","key","t","push","sum","reduce","a","b","Math","round","length","err","console","error"],"sources":["C:/Users/hp/Desktop/BHUMIIIII/health-tracker/frontend/src/Hook/useCholesterolChartData.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\r\nimport api from \"../utils/api\";\r\n\r\nconst toYMD = (d) => {\r\n  const yyyy = d.getFullYear();\r\n  const mm = String(d.getMonth() + 1).padStart(2, \"0\");\r\n  const dd = String(d.getDate()).padStart(2, \"0\");\r\n  return `${yyyy}-${mm}-${dd}`;\r\n};\r\n\r\nexport const useCholesterolChartData = (days = 7) => {\r\n  const [data, setData] = useState([]);\r\n  const [todayTotal, setTodayTotal] = useState(0);\r\n  const [avg, setAvg] = useState(0);\r\n\r\n  useEffect(() => {\r\n    const fetchSummary = async () => {\r\n      try {\r\n        const res = await api.get(`/metrics/cholesterol/summary?days=${days}`);\r\n\r\n        const mapTotal = new Map(\r\n          res.data.map(d => [toYMD(new Date(d.date)), Number(d.total) || 0])\r\n        );\r\n        const mapLDL = new Map(\r\n          res.data.map(d => [toYMD(new Date(d.date)), Number(d.ldl) || 0])\r\n        );\r\n        const mapHDL = new Map(\r\n          res.data.map(d => [toYMD(new Date(d.date)), Number(d.hdl) || 0])\r\n        );\r\n\r\n        const end = new Date();\r\n        end.setHours(0, 0, 0, 0);\r\n        const start = new Date(end);\r\n        start.setDate(end.getDate() - (days - 1));\r\n\r\n        const filled = [];\r\n        const totalArr = [];\r\n\r\n        for (let d = new Date(start); d <= end; d.setDate(d.getDate() + 1)) {\r\n          const key = toYMD(d);\r\n          const t = mapTotal.get(key) || 0;\r\n          const ldl = mapLDL.get(key) || 0;\r\n          const hdl = mapHDL.get(key) || 0;\r\n          filled.push({ date: key, total: t, ldl, hdl });\r\n          totalArr.push(t);\r\n        }\r\n\r\n        setData(filled);\r\n        setTodayTotal(mapTotal.get(toYMD(end)) || 0);\r\n        const sum = totalArr.reduce((a, b) => a + b, 0);\r\n        setAvg(Math.round(sum / totalArr.length));\r\n\r\n      } catch (err) {\r\n        console.error(\"Cholesterol fetch failed\", err);\r\n      }\r\n    };\r\n\r\n    fetchSummary();\r\n  }, [days]);\r\n\r\n  return { data, todayTotal, avg };\r\n};\r\n"],"mappings":";AAAA,SAASA,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAC3C,OAAOC,GAAG,MAAM,cAAc;AAE9B,MAAMC,KAAK,GAAIC,CAAC,IAAK;EACnB,MAAMC,IAAI,GAAGD,CAAC,CAACE,WAAW,CAAC,CAAC;EAC5B,MAAMC,EAAE,GAAGC,MAAM,CAACJ,CAAC,CAACK,QAAQ,CAAC,CAAC,GAAG,CAAC,CAAC,CAACC,QAAQ,CAAC,CAAC,EAAE,GAAG,CAAC;EACpD,MAAMC,EAAE,GAAGH,MAAM,CAACJ,CAAC,CAACQ,OAAO,CAAC,CAAC,CAAC,CAACF,QAAQ,CAAC,CAAC,EAAE,GAAG,CAAC;EAC/C,OAAO,GAAGL,IAAI,IAAIE,EAAE,IAAII,EAAE,EAAE;AAC9B,CAAC;AAED,OAAO,MAAME,uBAAuB,GAAGA,CAACC,IAAI,GAAG,CAAC,KAAK;EAAAC,EAAA;EACnD,MAAM,CAACC,IAAI,EAAEC,OAAO,CAAC,GAAGjB,QAAQ,CAAC,EAAE,CAAC;EACpC,MAAM,CAACkB,UAAU,EAAEC,aAAa,CAAC,GAAGnB,QAAQ,CAAC,CAAC,CAAC;EAC/C,MAAM,CAACoB,GAAG,EAAEC,MAAM,CAAC,GAAGrB,QAAQ,CAAC,CAAC,CAAC;EAEjCC,SAAS,CAAC,MAAM;IACd,MAAMqB,YAAY,GAAG,MAAAA,CAAA,KAAY;MAC/B,IAAI;QACF,MAAMC,GAAG,GAAG,MAAMrB,GAAG,CAACsB,GAAG,CAAC,qCAAqCV,IAAI,EAAE,CAAC;QAEtE,MAAMW,QAAQ,GAAG,IAAIC,GAAG,CACtBH,GAAG,CAACP,IAAI,CAACW,GAAG,CAACvB,CAAC,IAAI,CAACD,KAAK,CAAC,IAAIyB,IAAI,CAACxB,CAAC,CAACyB,IAAI,CAAC,CAAC,EAAEC,MAAM,CAAC1B,CAAC,CAAC2B,KAAK,CAAC,IAAI,CAAC,CAAC,CACnE,CAAC;QACD,MAAMC,MAAM,GAAG,IAAIN,GAAG,CACpBH,GAAG,CAACP,IAAI,CAACW,GAAG,CAACvB,CAAC,IAAI,CAACD,KAAK,CAAC,IAAIyB,IAAI,CAACxB,CAAC,CAACyB,IAAI,CAAC,CAAC,EAAEC,MAAM,CAAC1B,CAAC,CAAC6B,GAAG,CAAC,IAAI,CAAC,CAAC,CACjE,CAAC;QACD,MAAMC,MAAM,GAAG,IAAIR,GAAG,CACpBH,GAAG,CAACP,IAAI,CAACW,GAAG,CAACvB,CAAC,IAAI,CAACD,KAAK,CAAC,IAAIyB,IAAI,CAACxB,CAAC,CAACyB,IAAI,CAAC,CAAC,EAAEC,MAAM,CAAC1B,CAAC,CAAC+B,GAAG,CAAC,IAAI,CAAC,CAAC,CACjE,CAAC;QAED,MAAMC,GAAG,GAAG,IAAIR,IAAI,CAAC,CAAC;QACtBQ,GAAG,CAACC,QAAQ,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,MAAMC,KAAK,GAAG,IAAIV,IAAI,CAACQ,GAAG,CAAC;QAC3BE,KAAK,CAACC,OAAO,CAACH,GAAG,CAACxB,OAAO,CAAC,CAAC,IAAIE,IAAI,GAAG,CAAC,CAAC,CAAC;QAEzC,MAAM0B,MAAM,GAAG,EAAE;QACjB,MAAMC,QAAQ,GAAG,EAAE;QAEnB,KAAK,IAAIrC,CAAC,GAAG,IAAIwB,IAAI,CAACU,KAAK,CAAC,EAAElC,CAAC,IAAIgC,GAAG,EAAEhC,CAAC,CAACmC,OAAO,CAACnC,CAAC,CAACQ,OAAO,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE;UAClE,MAAM8B,GAAG,GAAGvC,KAAK,CAACC,CAAC,CAAC;UACpB,MAAMuC,CAAC,GAAGlB,QAAQ,CAACD,GAAG,CAACkB,GAAG,CAAC,IAAI,CAAC;UAChC,MAAMT,GAAG,GAAGD,MAAM,CAACR,GAAG,CAACkB,GAAG,CAAC,IAAI,CAAC;UAChC,MAAMP,GAAG,GAAGD,MAAM,CAACV,GAAG,CAACkB,GAAG,CAAC,IAAI,CAAC;UAChCF,MAAM,CAACI,IAAI,CAAC;YAAEf,IAAI,EAAEa,GAAG;YAAEX,KAAK,EAAEY,CAAC;YAAEV,GAAG;YAAEE;UAAI,CAAC,CAAC;UAC9CM,QAAQ,CAACG,IAAI,CAACD,CAAC,CAAC;QAClB;QAEA1B,OAAO,CAACuB,MAAM,CAAC;QACfrB,aAAa,CAACM,QAAQ,CAACD,GAAG,CAACrB,KAAK,CAACiC,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC;QAC5C,MAAMS,GAAG,GAAGJ,QAAQ,CAACK,MAAM,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAKD,CAAC,GAAGC,CAAC,EAAE,CAAC,CAAC;QAC/C3B,MAAM,CAAC4B,IAAI,CAACC,KAAK,CAACL,GAAG,GAAGJ,QAAQ,CAACU,MAAM,CAAC,CAAC;MAE3C,CAAC,CAAC,OAAOC,GAAG,EAAE;QACZC,OAAO,CAACC,KAAK,CAAC,0BAA0B,EAAEF,GAAG,CAAC;MAChD;IACF,CAAC;IAED9B,YAAY,CAAC,CAAC;EAChB,CAAC,EAAE,CAACR,IAAI,CAAC,CAAC;EAEV,OAAO;IAAEE,IAAI;IAAEE,UAAU;IAAEE;EAAI,CAAC;AAClC,CAAC;AAACL,EAAA,CAnDWF,uBAAuB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}