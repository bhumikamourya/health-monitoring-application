{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState, useEffect } from \"react\";\nimport api from \"../utils/api\";\nconst toYMD = d => {\n  const yyyy = d.getFullYear();\n  const mm = String(d.getMonth() + 1).padStart(2, \"0\");\n  const dd = String(d.getDate()).padStart(2, \"0\");\n  return `${yyyy}-${mm}-${dd}`;\n};\n\n// For Blood Pressure (systolic + diastolic)\nexport const useBPChartData = (days = 7) => {\n  _s();\n  const [data, setData] = useState([]);\n  const [todaySys, setTodaySys] = useState(0);\n  const [todayDia, setTodayDia] = useState(0);\n  const [avgSys, setAvgSys] = useState(0);\n  const [avgDia, setAvgDia] = useState(0);\n  useEffect(() => {\n    const fetchSummary = async () => {\n      try {\n        //  BP endpoint\n        const res = await api.get(`/metrics/bloodPressure/summary?days=${days}`);\n        const mapSys = new Map(res.data.map(d => [d.date, Number(d.systolic) || 0]));\n        const mapDia = new Map(res.data.map(d => [d.date, Number(d.diastolic) || 0]));\n        const end = new Date();\n        end.setHours(0, 0, 0, 0);\n        const start = new Date(end);\n        start.setDate(end.getDate() - (days - 1));\n        const filled = [];\n        const sysArr = [];\n        const diaArr = [];\n        for (let d = new Date(start); d <= end; d.setDate(d.getDate() + 1)) {\n          const key = toYMD(d);\n          const sysVal = Number(mapSys.get(key)) || 0;\n          const diaVal = Number(mapDia.get(key)) || 0;\n          filled.push({\n            date: key,\n            systolic: sysVal,\n            diastolic: diaVal\n          });\n          sysArr.push(sysVal);\n          diaArr.push(diaVal);\n        }\n        setData(filled);\n        const todayKey = toYMD(end);\n        setTodaySys(Number(mapSys.get(todayKey)) || 0);\n        setTodayDia(Number(mapDia.get(todayKey)) || 0);\n        const sumSys = sysArr.reduce((a, b) => a + b, 0);\n        const sumDia = diaArr.reduce((a, b) => a + b, 0);\n        setAvgSys(Math.round(sumSys / sysArr.length * 10) / 10);\n        setAvgDia(Math.round(sumDia / diaArr.length * 10) / 10);\n      } catch (err) {\n        console.error(\"BP fetch failed\", err);\n      }\n    };\n    fetchSummary();\n  }, [days]);\n  return {\n    data,\n    todaySys,\n    todayDia,\n    avgSys,\n    avgDia\n  };\n};\n_s(useBPChartData, \"SEJVVUGBgtRCNKkTBhUYk+wS8t4=\");","map":{"version":3,"names":["useState","useEffect","api","toYMD","d","yyyy","getFullYear","mm","String","getMonth","padStart","dd","getDate","useBPChartData","days","_s","data","setData","todaySys","setTodaySys","todayDia","setTodayDia","avgSys","setAvgSys","avgDia","setAvgDia","fetchSummary","res","get","mapSys","Map","map","date","Number","systolic","mapDia","diastolic","end","Date","setHours","start","setDate","filled","sysArr","diaArr","key","sysVal","diaVal","push","todayKey","sumSys","reduce","a","b","sumDia","Math","round","length","err","console","error"],"sources":["C:/Users/hp/Desktop/BHUMIIIII/health-tracker/frontend/src/Hook/useBPChartData.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\r\nimport api from \"../utils/api\";\r\n\r\nconst toYMD = (d) => {\r\n    const yyyy = d.getFullYear();\r\n    const mm = String(d.getMonth() + 1).padStart(2, \"0\");\r\n    const dd = String(d.getDate()).padStart(2, \"0\");\r\n    return `${yyyy}-${mm}-${dd}`;\r\n};\r\n\r\n// For Blood Pressure (systolic + diastolic)\r\nexport const useBPChartData = (days = 7) => {\r\n  const [data, setData] = useState([]);\r\n  const [todaySys, setTodaySys] = useState(0);\r\n  const [todayDia, setTodayDia] = useState(0);\r\n  const [avgSys, setAvgSys] = useState(0);\r\n  const [avgDia, setAvgDia] = useState(0);\r\n\r\n  useEffect(() => {\r\n    const fetchSummary = async () => {\r\n      try {\r\n        //  BP endpoint\r\n        const res = await api.get(`/metrics/bloodPressure/summary?days=${days}`);\r\n\r\n        const mapSys = new Map(res.data.map(d => [d.date, Number(d.systolic) || 0]));\r\n        const mapDia = new Map(res.data.map(d => [d.date, Number(d.diastolic) || 0]));\r\n\r\n        const end = new Date();\r\n        end.setHours(0, 0, 0, 0);\r\n        const start = new Date(end);\r\n        start.setDate(end.getDate() - (days - 1));\r\n\r\n        const filled = [];\r\n        const sysArr = [];\r\n        const diaArr = [];\r\n\r\n        for (let d = new Date(start); d <= end; d.setDate(d.getDate() + 1)) {\r\n          const key = toYMD(d);\r\n          const sysVal = Number(mapSys.get(key)) || 0;\r\n          const diaVal = Number(mapDia.get(key)) || 0;\r\n          filled.push({ date: key, systolic: sysVal, diastolic: diaVal });\r\n          sysArr.push(sysVal);\r\n          diaArr.push(diaVal);\r\n        }\r\n\r\n        setData(filled);\r\n\r\n        const todayKey = toYMD(end);\r\n        setTodaySys(Number(mapSys.get(todayKey)) || 0);\r\n        setTodayDia(Number(mapDia.get(todayKey)) || 0);\r\n\r\n        const sumSys = sysArr.reduce((a, b) => a + b, 0);\r\n        const sumDia = diaArr.reduce((a, b) => a + b, 0);\r\n        setAvgSys(Math.round((sumSys / sysArr.length) * 10) / 10);\r\n        setAvgDia(Math.round((sumDia / diaArr.length) * 10) / 10);\r\n      } catch (err) {\r\n        console.error(\"BP fetch failed\", err);\r\n      }\r\n    };\r\n\r\n    fetchSummary();\r\n  }, [days]);\r\n\r\n  return { data, todaySys, todayDia, avgSys, avgDia };\r\n};\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}